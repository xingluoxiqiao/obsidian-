# 项目介绍
12306 铁路购票系统，帮助用户完成互联网在线购票，提高居民买票效率以及减少售票人员工作。项目基础架构采用 JDK17、SpringBoot3 和 SpringCloud Alibaba 构建，完成会员注册、车票查询、车票下单以及支付等业务。底层采用缓存、消息队列以及分库分表等技术支持海量用户购票以及数据存储。
### 1. 使用责任链模式重构请求数据准确性检验

责任链模式是一种行为设计模式，它允许你将请求沿着处理者链进行发送。在业务中，用于请求的准确性检验可以通过责任链模式来组织。每个处理者负责检验请求的一部分内容，只有在通过了所有处理者的检验后，请求才被认为是有效的。

例如，在购票、下单以及支付结果回调的业务中，可以创建责任链，每个节点负责检验请求的一部分内容，如订单信息、用户信息、支付信息等。如果某个节点检验失败，责任链可以中断并返回相应的错误信息，否则继续传递到下一个节点，直至所有节点检验通过。

### 2. 通过 RocketMQ 延时消息特性，完成用户购票 10 分钟后未支付情况下取消订单功能

使用 RocketMQ 的延时消息特性，可以实现用户购票后，如果在规定时间内未支付，系统可以发送延时消息来触发取消订单的操作。这样可以在订单未支付的情况下，自动执行取消订单的操作，提高系统的稳定性和用户体验。

### 3. 封装缓存组件库避免注册用户时，用户名全局唯一带来的缓存穿透问题，减轻数据库访问压力

通过封装缓存组件库，可以提供统一的缓存访问接口，避免注册用户时因为用户名全局唯一而可能引发的缓存穿透问题。可以使用布隆过滤器等技术进行缓存穿透的防范。

当有注册用户请求时，首先通过缓存组件库检查用户名是否存在于缓存中，如果存在，则直接返回结果；如果不存在，再查询数据库，并将查询结果存入缓存。这样可以减轻数据库的访问压力，提高系统性能。

### 4. 使用 BinLog 配合 RocketMQ 消息队列完成 MySQL 数据库与 Redis 缓存之间的数据最终一致性

BinLog（Binary Log）是 MySQL 的二进制日志，用于记录对数据库的变更操作。通过监听 BinLog 的变更，可以将数据库的变更操作同步到 RocketMQ 消息队列中。然后，消费者可以订阅这些消息，将变更操作同步到 Redis 缓存中，从而实现 MySQL 数据库与 Redis 缓存之间的数据最终一致性。

这样可以确保数据库和缓存中的数据保持一致，提高系统的稳定性和可靠性。

### 5. 通过 Redis Lua 脚本原子特性，完成用户购票令牌分配，通过令牌限流以应对海量用户购票请求

使用 Redis Lua 脚本的原子特性，可以确保多个 Redis 命令在执行过程中不会被其他命令插入，保证购票令牌分配的原子性。通过 Lua 脚本可以实现购票令牌的分配和限流逻辑，确保在高并发的情况下，用户购票的过程是安全可靠的。

### 6. 通过订单号和用户信息复合分片算法完成订单数据分库分表，支持订单号和用户查询维度

对订单数据进行分库分表可以提高系统的横向扩展能力。通过订单号和用户信息的复合分片算法，可以将订单数据分布到不同的数据库和表中，支持按订单号和用户信息进行查询。

这样可以降低单个数据库或表的访问压力，提高系统的查询性能和并发能力。

### 7. 创建订单明细与乘车人的关联表，分库分表规则同订单，完成乘车人账号登录查询本人车票功能

通过创建订单明细与乘车人的关联表，并采用相同的分库分表规则，可以实现乘车人账号登录后，查询到本人的车票信息。这样可以更好地支持用户的查询需求，并保持数据的一致性。



