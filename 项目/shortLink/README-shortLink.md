# 项目简介
短链接（Short Link）是指将一个原始的长 URL（Uniform Resource Locator）通过特定的算法或服务转化为一个更短、易于记忆的URL。短链接通常只包含几个字符，而原始的长 URL 可能会非常长。  
短链接的原理非常简单，通过一个原始链接生成个相对短的链接，然后通过访问短链接跳转到原始链接。  
本项目的核心功能包括：
1. **生成唯一标识符**：当用户输入或提交一个长 URL 时，短链接服务会生成一个唯一的标识符或者短码。  
2. **将标识符与长 URL 关联**：短链接服务将这个唯一标识符与用户提供的长 URL 关联起来，并将其保存在数据库或者其他持久化存储中。  
3. **创建短链接**：将生成的唯一标识符加上短链接服务的域名（例如：http://nurl.ink ）作为前缀，构成一个短链接。  
4. **重定向**：当用户访问该短链接时，短链接服务接收到请求后会根据唯一标识符查找关联的长 URL，然后将用户重定向到这个长 URL。  
5. **跟踪统计**：一些短链接服务还会提供访问统计和分析功能，记录访问量、来源、地理位置等信息。  
--- 
项目采用 SaaS 方式开发。"SaaS"代表“软件即服务”（Software as a Service），与传统的软件模型不同，SaaS不需要用户在本地安装和维护软件，而是通过互联网直接访问在线应用程序。主要作用包括但不限于以下几个方面：  
- **提升用户体验**：用户更容易记忆和分享短链接，增强了用户的体验。  
- **节省空间**：短链接相对于长 URL 更短，可以节省字符空间，特别是在一些限制字符数的场合，如微博、短信等。  
- **美化**：短链接通常更美观、简洁，不会包含一大串字符。  
- **统计和分析**：可以追踪短链接的访问情况，了解用户的行为和喜好。  
# 技术架构
SpringBoot + SpringCloudAlibaba + RocketMQ + ShardingSphere + Redis + MySQL 
# 基础功能
![](https://pic.imgdb.cn/item/65c21c429f345e8d03fc75ca.png)
# 亮点难点  
短链接项目采用 SaaS 方式开发。既然是 SaaS 系统，那势必会带来 N 多个问题。
1. **海量并发**：可能会面对大量用户同时访问的情况，尤其在高峰期，这会对系统的性能和响应速度提出很高的要求。  
2. **海量存储**：可能需要存储大量的用户数据，包括数据库、缓存等，需要足够的存储空间和高效的存储管理方案。  
3. **多租户场景**：通常支持多个租户共享同一套系统，需要保证租户间的数据隔离、安全性和性能。  
4. **数据安全性**：需要保证用户数据的安全性和隐私，防止未经授权的访问和数据泄露。  
5. **扩展性&可伸缩性**：需要具备良好的扩展性，以应对用户数量和业务规模的增长。  
项目实现过程中会充分考虑以上问题，最终实现高可用、可扩展、支持海并发以及存储的 SaaS 短链接系统。
# 技术总结
1. 通过布隆过滤器完成判断短链接是否已存在，性能远胜分布式锁搭配查询数据库方案。
2. 使用 RocketMQ 消息队列“削峰”特点，完成海量访问短链接场景下的监控信息存储功能。
3. 封装缓存不存在读取功能，通过双重判定锁优化更新或失效场景下大量查询数据库问题。
4. 通过更新数据库删除缓存策略，保障短链接缓存与数据库之间的数据一致性功能。
5. 通过 Redis 完成消息队列消费业务下的幂等场景，保障消息在一定时间内消费且仅消费一次。
6. 使用读写锁和 RocketMQ 延迟队列功能，完成短链接在海量访问场景下的数据修改功能。
7. 为了兼容短链接后管用户分页查看短链接功能，在短链接数据分片的基础上增加路由表完成跳转功能。
8. 通过 Sentinel 接口访问 QPS 限流保障短链接系统稳定运行，触发限流规则后进行降级处理。