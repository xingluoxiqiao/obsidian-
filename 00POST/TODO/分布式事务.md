# 分布式事务
分布式事务指事务的参与者、支持事务的服务器、资源服务器以及事务管理器分别位于不同的分布式系统的不同节点之上,且属于不同的应用，分布式事务需要保证这些操作要么全部成功，要么全部失败。在传统的单体应用中，事务管理相对简单，因为所有的数据库操作都在同一个事务中进行。但在分布式系统中，涉及到多个独立的数据库或服务，事务管理就变得更加复杂。本质上来说，分布式事务就是为了保证不同数据库的数据一致性。
# 分布式事务管理方式
1. **两阶段提交（Two-Phase Commit, 2PC）**：
    - 第一阶段：协调者向所有参与者发出事务询问，询问它们是否可以执行提交操作。
    - 第二阶段：协调者根据参与者的响应，决定是否执行提交或回滚操作，并通知所有参与者执行相应的操作。
    - 优点：保证了事务的原子性，要么所有参与者都提交，要么都回滚。
    - 缺点：需要等待所有参与者响应，协调者单点故障会导致整个事务的阻塞。
2. **补偿事务（Compensating Transaction）**：
    - 事务执行后，可能会触发一系列的补偿操作来撤销之前的操作。
    - 优点：无需全局协调者，降低了系统的复杂度。
    - 缺点：需要额外的逻辑来实现补偿操作，可能增加了系统的开发和维护成本。
3. **TCC（Try-Confirm-Cancel）**：
    
    - 尝试阶段（Try）：尝试执行事务操作，并预留资源。
    - 确认阶段（Confirm）：确认事务操作，提交预留的资源。
    - 取消阶段（Cancel）：如果确认失败或者发生异常，取消事务操作，并释放预留的资源。
    - 优点：相对于两阶段提交更加灵活，不会导致事务的阻塞。
    - 缺点：需要额外的补偿逻辑来处理取消操作，增加了系统的复杂度。
4. **消息驱动事务（Message-Driven Transaction）**：
    
    - 使用消息队列来实现分布式事务的一致性。
    - 将事务操作转化为消息发送，各个系统接收到消息后执行相应的操作。
    - 优点：解耦了系统之间的依赖关系，提高了系统的可伸缩性。
    - 缺点：消息队列的可靠性可能会影响事务的一致性。
  
