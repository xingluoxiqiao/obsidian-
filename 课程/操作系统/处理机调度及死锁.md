引起进程调度的因素可归结为这样几个：
  ①正在执行的进程执行完毕，或因发生某事件而不能再继续执行；
  ②执行中的进程因提出I／O请求而暂停执行；
  ③在进程通信或同步过程中执行了某种原语操作，如P操作（wait操作）、Block原语、  Wakeup原语等。
  
三种调度层次：
1）高级调度（作业调度，长程调度）
称为作业调度、长程调度（Long-term scheduling） ，用于决定**把外存上处于后备队列中的哪些作业调入内存**，并为它们创建进程、分配必要的资源，然后，再将新创建的进程排在就绪队列上，准备执行 。
	1.选择多少个作业进入内存，为之创建进程？
  - 取决于多道程序的度，即允许同时在内存中运行的进程数。
	2.选择哪些作业? 
  - 取决于高级调度算法

2）低级调度（进程调度，短程调度）
又称进程调度或短程调度（Short-term scheduling） 。低级调度用来决定**就绪队列中的哪个进程应获得处理机**，然后再由分派程序把处理机分配给该进程的具体操作。非抢占，抢占
功能：
(1) 保存处理机的现场信息。
(2) 按某种算法选取进程。
(3) 把处理器分配给进程。


3）中级调度（中程调度）
决定**把外存上的哪些又具备运行条件的就绪进程，重新调入内存**，并修改其状态为就绪状态，挂在就绪队列上等待调度。
引入中级调度的主要目的，是为了提高内存利用率和系统吞吐量。实际上是存储器管理的对换功能。
只有支持进程挂起的操作系统才具有中程调度功能。

#### 处理机调度算法的目标及准则 
 
1.面向用户的准则 ：这是为了满足用户的需求所应遵循的一些准则。其中，比较重要的有以下几点。
（1）周转时间短
（2）响应时间快
（3）截止时间的保证
（4）优先权准则
 2．面向系统的准则
 （1）系统吞吐量高。吞吐量是指在单位时间内，系统所完成的作业数。
 （2）处理机利用率好。
 （3）各类资源的平衡利用

#### 调度算法：
**FCFS**（First Come First Service）
比较有利于长作业（进程），而不利于短作业（进程）
**SPF/SJF**（short job first）/（short process first）
  SJF：外存 到 内存
  SPF：就绪队列 到 处理机执行
(1)该算法对长作业不利。
(2)该算法完全未考虑作业的紧迫程度，因而不能保证紧迫性作业（进程）会被及时处理。
(3)由于作业（进程）的长短只是根据用户所提供的估计执行时间而定的，而用户又可能会估计不准运行时间，致使该算法不一定能真正做到短作业优先调度。 
**优先级调度算法**（priority-scheduling algorithm）
当应用于作业调度时，优先级调度算法是把具有最高优先级的作业调入内存之中。
当应用于进程调度时，优先级调度算法是调度就绪队列中具有最高优先级的进程获得处理机。
**高响应比优先调度算法**
Rp=1+等待时间/要求服务时间
优点：该算法既照顾了短作业，又考虑了作业到达的先后次序，不会使长作业长期得不到服务。
缺点：利用该算法时，每次调度之前，都须先做响应比的计算，会增加系统开销。
### 进程调度
##### 进程调度的任务、机制和方式
1.进程调度的任务
1）保存处理机现场
2）按照某种算法选取进程
3）把处理机分配给进程
2.进程调度机制
1）排队器
2）分派器
3）上下文切换器
3.进程调度的方式
1）非抢占方式2）抢占方式
“抢占”的原则：
①优先权原则；②短进程优先原则；③时间片原则
##### 轮转调度算法
**时间片的设置问题**
进程切换将会增加系统的额外开销。 
时间片设定得太短，进程切换会非常频繁，从而降低处理机的效率；时间片设定得太长，将无法满足交互式用户对响应时间的要求。
因此，时间片大小的确定应综合考虑系统的最大用户数、响应时间、系统效率等多种因素。 
##### 优先级调度算法 
  （1）静态优先级
  （2）动态优先级
##### 多队列调度算法
##### 多级反馈队列调度算法
![[Pasted image 20230612113756.png]]

#### 实时调度
#### 死锁
![[Pasted image 20230612114711.png]]
竞争资源引起进程死锁
进程推进顺序不当引起死锁
![[Pasted image 20230612114945.png]]
![[Pasted image 20230612114955.png]]预防死锁的方法是使四个必要条件中的第2、3、4条件之一不能成立，来避免发生死锁。
至于必要条件1，因为它是由设备的固有属性所决定的，不仅不能改变，还应加以保证。
![[Pasted image 20230612115156.png]]